# Real-Time Intervention Manual v1.0 - AI Agent执行实时干预操作手册

## 🎯 **干预手册目标**

**目的**: 为用户提供实时干预AI Agent执行的具体操作指南
**适用场景**: AI Agent出现偏差、遗漏或能力不足时的即时干预
**响应时间**: 发现问题后立即干预，不超过5分钟
**CRITICAL**: 基于AI Agent长上下文一致性问题的实际解决方案

## 🚨 **立即干预触发信号**

### **红色警报（立即停止）**
```markdown
🔴 以下情况必须立即停止AI Agent执行：

1. 明显违反核心约束
   - 使用any类型（违反零技术债务政策）
   - 跳过质量门禁验证
   - 偏离统一架构模式

2. 重复历史错误
   - 遗漏MPLP预留接口（历史问题重现）
   - 不遵循双重命名约定
   - 跳过横切关注点集成

3. 能力不足表现
   - 连续2次给出错误答案
   - 无法理解复杂技术要求
   - 输出质量明显下降

4. 一致性严重偏离
   - 忘记项目核心目标
   - 违反用户明确要求
   - 与前期输出自相矛盾
```

### **黄色警报（需要纠正）**
```markdown
🟡 以下情况需要及时纠正：

1. 理解偏差
   - 对要求的理解出现歧义
   - 技术方案与设计不符
   - 实施细节存在疑问

2. 质量下降
   - 代码质量指标下降
   - 文档完整性不足
   - 测试覆盖率降低

3. 进度异常
   - 执行时间超出预期
   - 任务完成质量不稳定
   - 效率明显下降
```

## 🛠️ **具体干预操作步骤**

### **步骤1: 立即停止和状态保存**
```markdown
操作清单：
□ 要求AI Agent立即停止当前操作
□ 保存当前执行状态和进度
□ 记录发现问题的具体表现
□ 截图或复制相关输出内容

示例指令：
"请立即停止当前操作，保存当前状态，我需要进行干预检查。"
```

### **步骤2: 问题诊断和分析**
```markdown
诊断清单：
□ 问题类型：技术错误/理解偏差/能力不足/一致性偏离
□ 影响范围：当前任务/当前阶段/整个模块/项目级别
□ 根本原因：上下文丢失/能力局限/约束遗忘/其他
□ 紧急程度：立即修复/阶段内修复/可延后处理

分析方法：
1. 对比AI Agent输出与原始要求
2. 检查是否违反核心约束条件
3. 评估与成功模块的一致性
4. 确定问题的根本原因
```

### **步骤3: 上下文重建和纠正**
```markdown
重建操作：
□ 重新明确项目核心目标和约束
□ 重述当前阶段的具体要求
□ 确认质量标准和验收条件
□ 强调与其他模块的一致性要求

纠正指令模板：
"我发现你在[具体问题]方面出现了偏差。请重新确认以下要求：
1. 项目核心目标：[具体目标]
2. 当前阶段要求：[具体要求]
3. 质量标准：[具体标准]
4. 必须遵循的约束：[具体约束]
请确认你的理解，然后重新执行任务。"
```

### **步骤4: 验证和继续执行**
```markdown
验证清单：
□ AI Agent重新确认了核心要求
□ 理解偏差已经得到纠正
□ 输出质量恢复到预期水平
□ 一致性检查通过

继续执行条件：
- AI Agent明确表示理解了纠正要求
- 提供了具体的改进方案
- 通过了验证性测试问题
- 承诺遵循所有约束条件
```

## 📋 **常见问题干预模板**

### **模板1: 遗漏MPLP预留接口**
```markdown
问题识别：
"我发现你遗漏了MPLP预留接口的实现，这是历史上多次出现的问题。"

干预指令：
"请立即停止，重新确认以下要求：
1. 必须实现8个MPLP模块预留接口
2. 所有参数必须使用下划线前缀
3. 必须添加TODO注释等待CoreOrchestrator激活
4. 必须集成横切关注点
请重新实现预留接口，并运行架构完整性检查验证。"
```

### **模板2: 违反代码质量标准**
```markdown
问题识别：
"我发现你使用了any类型/跳过了质量检查，这违反了零技术债务政策。"

干预指令：
"请立即停止，重新确认质量标准：
1. 绝对禁止使用any类型
2. TypeScript编译必须0错误
3. ESLint检查必须0警告
4. 所有质量门禁必须通过
请修复所有质量问题，并运行完整的质量检查。"
```

### **模板3: 架构一致性偏离**
```markdown
问题识别：
"我发现你的实现与其他6个模块的架构不一致。"

干预指令：
"请立即停止，重新确认架构要求：
1. 必须与Context/Plan/Confirm/Trace/Role/Extension模块使用相同架构
2. 必须使用统一的DDD分层结构
3. 必须注入相同的9个L3管理器
4. 必须遵循相同的横切关注点集成模式
请重新设计架构，确保与其他模块完全一致。"
```

## 🔄 **干预效果验证机制**

### **验证检查清单**
```markdown
□ 技术验证
  - 代码质量检查通过
  - 架构完整性验证通过
  - 功能测试通过
  - 集成测试通过

□ 一致性验证
  - 与原始要求一致
  - 与其他模块架构一致
  - 与质量标准一致
  - 与用户期望一致

□ 能力验证
  - AI Agent理解正确
  - 输出质量稳定
  - 执行效率正常
  - 自我纠正能力恢复
```

### **验证失败处理**
```markdown
如果验证失败：
1. 重新进行更深入的干预
2. 考虑降低任务复杂度
3. 增加人工监督频率
4. 必要时考虑人工接管部分任务

验证成功后：
1. 记录干预过程和效果
2. 更新监控阈值
3. 继续执行任务
4. 增加后续监控频率
```

## 📊 **干预记录和改进**

### **干预记录模板**
```markdown
干预时间：[时间戳]
问题类型：[具体问题分类]
触发原因：[发现问题的具体表现]
干预措施：[采取的具体行动]
纠正效果：[干预后的改善情况]
经验教训：[可用于改进的经验]
预防措施：[避免类似问题的建议]
```

### **持续改进机制**
```markdown
基于干预记录：
1. 识别常见问题模式
2. 优化监控阈值设置
3. 改进干预操作流程
4. 更新AI Agent约束文档
5. 完善预防性措施
```

---

**版本**: 1.0.0
**生效日期**: 2025-08-24
**适用范围**: 所有需要AI Agent执行的复杂任务
**使用原则**: 及时干预，精准纠正，持续改进
