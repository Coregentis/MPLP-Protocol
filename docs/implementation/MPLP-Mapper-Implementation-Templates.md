# MPLP Mapper Implementation Templates v1.0

## üìã **Template Overview**

**Purpose**: Standardized Mapper implementation templates for MPLP dual naming convention
**Scope**: Schema (snake_case) ‚Üî TypeScript (camelCase) mapping
**Quality Standard**: Zero Technical Debt + Enterprise-Grade Implementation
**Based On**: 6 completed modules unified implementation pattern (Context, Plan, Confirm, Trace, Role, Extension)
**CRITICAL**: All 10 modules must use IDENTICAL Mapper implementation pattern

## üéØ **Dual Naming Convention Standard**

### **Schema Layer (snake_case)**
```json
{
  "context_id": "uuid-string",
  "created_at": "2025-08-22T10:30:00Z",
  "security_context": {
    "user_identity": {
      "user_id": "string",
      "display_name": "string"
    }
  }
}
```

### **TypeScript Layer (camelCase)**
```typescript
interface ModuleEntityData {
  contextId: string;
  createdAt: Date;
  securityContext: {
    userIdentity: {
      userId: string;
      displayName: string;
    };
  };
}
```

## üèóÔ∏è **Complete Mapper Template**

### **1. Schema Interface Definition**
```typescript
/**
 * {Module} Schema Interface (snake_case) - Based on mplp-{module}.json
 */
export interface {Module}Schema {
  // ===== BASIC PROTOCOL FIELDS =====
  protocol_version: string;
  timestamp: string;
  {module}_id: string;
  name: string;
  description?: string;
  status: string;
  
  // ===== CROSS-MODULE COORDINATION FIELDS =====
  // (Based on MPLP module relationships)
  context_id?: string;        // Associated Context ID
  plan_id?: string;          // Associated Plan ID  
  role_id?: string;          // Creator Role ID
  trace_id?: string;         // Monitoring Trace ID
  
  // ===== CROSS-CUTTING CONCERNS INTEGRATION =====
  // (Based on 9 cross-cutting concerns schemas)
  security_context?: SecurityContextSchema;
  performance_metrics?: PerformanceMetricsSchema;
  error_handling?: ErrorHandlingSchema;
  event_bus?: EventBusSchema;
  coordination?: CoordinationSchema;
  state_sync?: StateSyncSchema;
  orchestration?: OrchestrationSchema;
  transaction?: TransactionSchema;
  protocol_version_info?: ProtocolVersionSchema;
  
  // ===== MODULE-SPECIFIC FIELDS =====
  // Add module-specific fields here based on mplp-{module}.json
  {module}_specific_field?: string;
}
```

### **2. TypeScript Entity Data Interface**
```typescript
/**
 * {Module} Entity Data Interface (camelCase) - TypeScript Layer
 */
export interface {Module}EntityData {
  // ===== BASIC PROTOCOL FIELDS =====
  protocolVersion: string;
  timestamp: Date;
  {module}Id: string;
  name: string;
  description?: string;
  status: string;
  
  // ===== CROSS-MODULE COORDINATION FIELDS =====
  contextId?: string;
  planId?: string;
  roleId?: string;
  traceId?: string;
  
  // ===== CROSS-CUTTING CONCERNS INTEGRATION =====
  securityContext?: SecurityContextData;
  performanceMetrics?: PerformanceMetricsData;
  errorHandling?: ErrorHandlingData;
  eventBus?: EventBusData;
  coordination?: CoordinationData;
  stateSync?: StateSyncData;
  orchestration?: OrchestrationData;
  transaction?: TransactionData;
  protocolVersionInfo?: ProtocolVersionData;
  
  // ===== MODULE-SPECIFIC FIELDS =====
  {module}SpecificField?: string;
}
```

### **3. Complete Mapper Class Implementation**
```typescript
/**
 * {Module} Mapper - Complete Schema-TypeScript Mapping
 * 
 * Implements MPLP dual naming convention with cross-cutting concerns integration
 */
export class {Module}Mapper {
  /**
   * TypeScript Entity ‚Üí Schema Format (camelCase ‚Üí snake_case)
   */
  static toSchema(entity: {Module}EntityData): {Module}Schema {
    return {
      // ===== BASIC PROTOCOL FIELDS =====
      protocol_version: entity.protocolVersion,
      timestamp: entity.timestamp.toISOString(),
      {module}_id: entity.{module}Id,
      name: entity.name,
      description: entity.description,
      status: entity.status,
      
      // ===== CROSS-MODULE COORDINATION FIELDS =====
      context_id: entity.contextId,
      plan_id: entity.planId,
      role_id: entity.roleId,
      trace_id: entity.traceId,
      
      // ===== CROSS-CUTTING CONCERNS MAPPING =====
      security_context: entity.securityContext ? this.mapSecurityContextToSchema(entity.securityContext) : undefined,
      performance_metrics: entity.performanceMetrics ? this.mapPerformanceMetricsToSchema(entity.performanceMetrics) : undefined,
      error_handling: entity.errorHandling ? this.mapErrorHandlingToSchema(entity.errorHandling) : undefined,
      event_bus: entity.eventBus ? this.mapEventBusToSchema(entity.eventBus) : undefined,
      coordination: entity.coordination ? this.mapCoordinationToSchema(entity.coordination) : undefined,
      state_sync: entity.stateSync ? this.mapStateSyncToSchema(entity.stateSync) : undefined,
      orchestration: entity.orchestration ? this.mapOrchestrationToSchema(entity.orchestration) : undefined,
      transaction: entity.transaction ? this.mapTransactionToSchema(entity.transaction) : undefined,
      protocol_version_info: entity.protocolVersionInfo ? this.mapProtocolVersionToSchema(entity.protocolVersionInfo) : undefined,
      
      // ===== MODULE-SPECIFIC FIELDS =====
      {module}_specific_field: entity.{module}SpecificField
    };
  }

  /**
   * Schema Format ‚Üí TypeScript Entity (snake_case ‚Üí camelCase)
   */
  static fromSchema(schema: {Module}Schema): {Module}EntityData {
    return {
      // ===== BASIC PROTOCOL FIELDS =====
      protocolVersion: schema.protocol_version,
      timestamp: new Date(schema.timestamp),
      {module}Id: schema.{module}_id,
      name: schema.name,
      description: schema.description,
      status: schema.status,
      
      // ===== CROSS-MODULE COORDINATION FIELDS =====
      contextId: schema.context_id,
      planId: schema.plan_id,
      roleId: schema.role_id,
      traceId: schema.trace_id,
      
      // ===== CROSS-CUTTING CONCERNS MAPPING =====
      securityContext: schema.security_context ? this.mapSecurityContextFromSchema(schema.security_context) : undefined,
      performanceMetrics: schema.performance_metrics ? this.mapPerformanceMetricsFromSchema(schema.performance_metrics) : undefined,
      errorHandling: schema.error_handling ? this.mapErrorHandlingFromSchema(schema.error_handling) : undefined,
      eventBus: schema.event_bus ? this.mapEventBusFromSchema(schema.event_bus) : undefined,
      coordination: schema.coordination ? this.mapCoordinationFromSchema(schema.coordination) : undefined,
      stateSync: schema.state_sync ? this.mapStateSyncFromSchema(schema.state_sync) : undefined,
      orchestration: schema.orchestration ? this.mapOrchestrationFromSchema(schema.orchestration) : undefined,
      transaction: schema.transaction ? this.mapTransactionFromSchema(schema.transaction) : undefined,
      protocolVersionInfo: schema.protocol_version_info ? this.mapProtocolVersionFromSchema(schema.protocol_version_info) : undefined,
      
      // ===== MODULE-SPECIFIC FIELDS =====
      {module}SpecificField: schema.{module}_specific_field
    };
  }

  /**
   * Validate Schema Format Data
   */
  static validateSchema(data: unknown): data is {Module}Schema {
    if (!data || typeof data !== 'object') return false;

    const obj = data as Record<string, unknown>;

    // Validate required basic fields
    if (typeof obj.protocol_version !== 'string') return false;
    if (typeof obj.timestamp !== 'string') return false;
    if (typeof obj.{module}_id !== 'string') return false;
    if (typeof obj.name !== 'string') return false;
    if (typeof obj.status !== 'string') return false;

    // Additional validation logic based on specific module requirements
    return true;
  }

  /**
   * Batch Conversion: TypeScript Entity Array ‚Üí Schema Array
   */
  static toSchemaArray(entities: {Module}EntityData[]): {Module}Schema[] {
    return entities.map(entity => this.toSchema(entity));
  }

  /**
   * Batch Conversion: Schema Array ‚Üí TypeScript Entity Array
   */
  static fromSchemaArray(schemas: {Module}Schema[]): {Module}EntityData[] {
    return schemas.map(schema => this.fromSchema(schema));
  }

  // ===== CROSS-CUTTING CONCERNS MAPPING METHODS =====
  // These methods handle the 9 cross-cutting concerns mapping
  
  private static mapSecurityContextToSchema(data: SecurityContextData): SecurityContextSchema {
    // Implementation based on mplp-security.json schema
    return {
      session_id: data.sessionId,
      user_identity: {
        user_id: data.userIdentity.userId,
        username: data.userIdentity.username,
        display_name: data.userIdentity.displayName,
        user_type: data.userIdentity.userType,
        // ... other security context fields
      },
      // ... other security context mapping
    };
  }

  private static mapSecurityContextFromSchema(schema: SecurityContextSchema): SecurityContextData {
    // Implementation based on mplp-security.json schema
    return {
      sessionId: schema.session_id,
      userIdentity: {
        userId: schema.user_identity.user_id,
        username: schema.user_identity.username,
        displayName: schema.user_identity.display_name,
        userType: schema.user_identity.user_type,
        // ... other security context fields
      },
      // ... other security context mapping
    };
  }

  // Similar methods for other 8 cross-cutting concerns:
  // - mapPerformanceMetricsToSchema/FromSchema
  // - mapErrorHandlingToSchema/FromSchema
  // - mapEventBusToSchema/FromSchema
  // - mapCoordinationToSchema/FromSchema
  // - mapStateSyncToSchema/FromSchema
  // - mapOrchestrationToSchema/FromSchema
  // - mapTransactionToSchema/FromSchema
  // - mapProtocolVersionToSchema/FromSchema
}
```

## üîß **Implementation Checklist**

### **Áªü‰∏ÄÂÆûÊñΩÊ∏ÖÂçïÔºàÊâÄÊúâ10‰∏™Ê®°Âùó‰ΩøÁî®IDENTICALÊµÅÁ®ãÔºâ**
```markdown
CRITICAL: Âü∫‰∫é6‰∏™Â∑≤ÂÆåÊàêÊ®°ÂùóÁöÑÊàêÂäüÊ®°Âºè

‚ñ° Èò∂ÊÆµ1: Âº∫Âà∂ÊñáÊ°£ÈòÖËØªÂíåÊû∂ÊûÑÁêÜËß£
  ‚ñ° ËØªÂèñÂÆûÈôÖÁöÑsrc/schemas/mplp-{module}.jsonÊñá‰ª∂
  ‚ñ° ÁêÜËß£Áªü‰∏ÄÊû∂ÊûÑÂéüÂàôÂíåÂèåÈáçÂëΩÂêçÁ∫¶ÂÆö
  ‚ñ° ÂèÇËÄÉÂ∑≤ÂÆåÊàêÊ®°ÂùóÁöÑMapperÂÆûÁé∞Ê®°Âºè

‚ñ° Èò∂ÊÆµ2: SchemaÊé•Âè£ÂÆö‰πâ
  ‚ñ° ÂàõÂª∫SchemaÊé•Âè£Ôºàsnake_caseÂëΩÂêçÔºâ
  ‚ñ° ÂàõÂª∫EntityDataÊé•Âè£ÔºàcamelCaseÂëΩÂêçÔºâ
  ‚ñ° Á°Æ‰øù‰∏éÂÖ∂‰ªñ6‰∏™Ê®°ÂùóÁöÑÊé•Âè£ÁªìÊûÑ‰∏ÄËá¥

‚ñ° Èò∂ÊÆµ3: Ê†∏ÂøÉÊò†Â∞ÑÊñπÊ≥ïÂÆûÁé∞
  ‚ñ° ÂÆûÁé∞toSchema()ÊñπÊ≥ïÔºàcamelCase ‚Üí snake_caseÔºâ
  ‚ñ° ÂÆûÁé∞fromSchema()ÊñπÊ≥ïÔºàsnake_case ‚Üí camelCaseÔºâ
  ‚ñ° ÂÆûÁé∞validateSchema()ÊñπÊ≥ïÔºàÁ±ªÂûãÂÆâÂÖ®È™åËØÅÔºâ
  ‚ñ° ÂÆûÁé∞ÊâπÈáèËΩ¨Êç¢ÊñπÊ≥ïÔºàtoSchemaArray, fromSchemaArrayÔºâ

‚ñ° Èò∂ÊÆµ4: Ê®™ÂàáÂÖ≥Ê≥®ÁÇπÊò†Â∞ÑÂÆûÁé∞
  ‚ñ° ÂÆûÁé∞ÊâÄÊúâ9‰∏™Ê®™ÂàáÂÖ≥Ê≥®ÁÇπÁöÑÊò†Â∞ÑÊñπÊ≥ï
  ‚ñ° Á°Æ‰øù‰∏éÂÖ∂‰ªñÊ®°ÂùóÁöÑÊ®™ÂàáÂÖ≥Ê≥®ÁÇπÊò†Â∞Ñ‰∏ÄËá¥
  ‚ñ° È™åËØÅÊò†Â∞ÑÁöÑÂÆåÊï¥ÊÄßÂíåÊ≠£Á°ÆÊÄß

‚ñ° Èò∂ÊÆµ5: Ë¥®ÈáèÈ™åËØÅÂíåÊµãËØï
  ‚ñ° ÊµãËØïÊâÄÊúâÊò†Â∞ÑÂáΩÊï∞ÁöÑ‰∏ÄËá¥ÊÄß
  ‚ñ° Á°Æ‰øù100% TypeScriptÁ±ªÂûãÂÆâÂÖ®
  ‚ñ° È™åËØÅESLintÂêàËßÑÊÄßÔºà0Ë≠¶ÂëäÔºâ
  ‚ñ° Á°Æ‰øù‰∏éÂÖ∂‰ªñ6‰∏™Ê®°ÂùóÁöÑË¥®ÈáèÊ†áÂáÜ‰∏ÄËá¥
```

### **Áªü‰∏ÄË¥®ÈáèÈó®Á¶ÅÔºàÈõ∂ÂÆπÂøçÊ†áÂáÜÔºâ**
```bash
# Âº∫Âà∂Ë¥®ÈáèÊ£ÄÊü•Ôºà‰∏éÂÖ∂‰ªñ6‰∏™Â∑≤ÂÆåÊàêÊ®°ÂùóÁõ∏ÂêåÊ†áÂáÜÔºâ
npm run typecheck        # ÂøÖÈ°ªÈÄöËøáÔºö0ÈîôËØØ
npm run lint             # ÂøÖÈ°ªÈÄöËøáÔºö0Ë≠¶Âëä
npm run test:mappers     # ÂøÖÈ°ªÈÄöËøáÔºö100%
npm run validate:mapping # ÂøÖÈ°ªÈÄöËøáÔºö100%‰∏ÄËá¥ÊÄß
npm run validate:cross-cutting # ÂøÖÈ°ªÈÄöËøáÔºö9‰∏™ÂÖ≥Ê≥®ÁÇπ100%ÈõÜÊàê
```

---

**Template Version**: 2.0.0
**Based On**: 6‰∏™Â∑≤ÂÆåÊàêÊ®°ÂùóÁöÑÁªü‰∏ÄÊû∂ÊûÑÊ®°ÂºèÔºàContext, Plan, Confirm, Trace, Role, ExtensionÔºâ
**Quality Standard**: Enterprise-Grade + Zero Technical Debt + Unified Architecture
**Applicable To**: ÊâÄÊúâMPLP v1.0Ê®°ÂùóÔºàÁ°Æ‰øù10‰∏™Ê®°Âùó‰ΩøÁî®IDENTICALÊ®°ÂºèÔºâ
**CRITICAL**: Á°Æ‰øùÊâÄÊúâÊ®°ÂùóMapperÂÆûÁé∞ÂÆåÂÖ®‰∏ÄËá¥ÔºåÊîØÊåÅÁªü‰∏ÄÁöÑÂçèËÆÆÁîüÊÄÅÁ≥ªÁªü
